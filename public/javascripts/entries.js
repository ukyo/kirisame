// Generated by CoffeeScript 1.4.0
(function() {

  window.onload = function() {
    var csrfToken, deleteEntry, errorCallback, link, successCallback, _i, _len, _ref, _results;
    csrfToken = common.cookie('csrftoken');
    successCallback = function() {
      alert('success');
      return location.href = '/admin/entries';
    };
    errorCallback = function() {
      return alert('error');
    };
    deleteEntry = function(e) {
      var fd, xhr;
      e.preventDefault();
      if (!confirm("delete " + this.href + ".")) {
        return;
      }
      xhr = new XMLHttpRequest;
      xhr.open('DELETE', this.href);
      xhr.onload = successCallback;
      xhr.onerror = errorCallback;
      fd = new FormData;
      fd.append('csrftoken', csrfToken);
      return xhr.send(fd);
    };
    _ref = document.querySelectorAll('.delete');
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      link = _ref[_i];
      _results.push(link.onclick = deleteEntry);
    }
    return _results;
  };

}).call(this);
